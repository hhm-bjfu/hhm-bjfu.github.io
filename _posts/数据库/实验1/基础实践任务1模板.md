# 数据库系统课程基础实践报告

------

篇章1：数据管理技术实践篇

------

## 1. 报告基本信息

* 姓名：
* 班级：
* 学号：

## 2. 使用视图优化数据库管理 

### 【任务目的】

能够根据业务需要创建来自单表或多表的数据视图，并可进一步基于该视图开展查询功能。在构建视图的基础上，理解视图在数据保护、查询优化方面的作用。

### 【任务环境】

* 硬件环境：
* 软件环境：

### 【任务步骤完成情况】

1. 创建单表视图

* 使用Management Studio创建一个电子05的学生视图stu_05_view（包括学号s_no、姓名s_name、性别s_sex、专业班级s_class、出生日期s_birthday）。

语句：


* 使用SQL语句创建一个学生作业平均成绩视图stu_avg_view（包括学号s_no、作业1平均成绩h1_avg、作业2平均成绩h2_avg、作业3平均成绩h3_avg）。

语句：




1. 创建多表视图

* 使用Management Studio创建一个学生选修课程情况的视图student_course（包括学生姓名s_name，课程名称c_name，授课老师c_teacher）。

语句：



* 使用SQL创建一个生物05的学生作业情况视图student_05_homework（包括学号s_no、姓名s_name、课程名c_name、作业1成绩h1_score、作业2成绩h2_score、作业3成绩h3_score）。

语句：


1. 查询视图

* 使用stu_avg_view查询0433作业1平均分、作业2平均分和作业3平均分的平均分stu_view。

语句：



* 使用student_course查询选修‘数据结构’课程的学生。

语句：



1.  修改视图

* 修改生物05的学生作业情况视图student_05_homework，将作业2成绩和作业3成绩去掉。

语句：



* 使用stu_05_view，向电子05的学生视图中添加一条记录，其中学号为0596，姓名为赵亦，性别为男，专业班级为电子05，出生日期为1986-6-8。

语句：

截图：

* 使用stu_05_view，将电子05的学生视图中赵亦的性别改为“女”。

语句：



1. 删除视图

* 使用Management Studio删除stu_05_view视图。

语句：


* 使用SQL语句删除student_05_homework。

语句：


### 【任务总结】

1. 概述视图的主要作用。

   

2. 根据给定的MySQL视图定义语句，自学并说明下列语句的参数含义。

```sql
CREATE
    [OR REPLACE]
    [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
    [DEFINER = user]
    [SQL SECURITY { DEFINER | INVOKER }]
    VIEW view_name [(column_list)]
    AS select_statement
    [WITH [CASCADED | LOCAL] CHECK OPTION]
```


3. 概述不能建议使用视图进行更新数据的原因。

## 2. 使用索引优化数据库管理

### 【任务目的】

能够根据查询效率需要，对数据表中列建立适当类型的索引。能够分析使用索引的代价，理解索引使用的使用场景和适当使用索引的需要。

### 【任务环境】

* 硬件环境：
* 软件环境：

### 【任务步骤完成情况】

1. 创建索引

* 在学生表中添加一列身份证号sid，填充身份证号信息，然后使用Management Studio为身份证号列创建唯一索引。

语句：



1. 删除索引

* 使用SQL语句删除身份证号上的唯一索引。

语句：



###  【任务总结】

1. 分析聚集型索引和非聚集型索引的区别。

   

2. 辨析索引的数量越多越好这句话是否正确。

   

3. 根据给定的MySQL索引定义语句，自学并说明下列语句的参数含义。

```sql
CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name
    [index_type]
    ON tbl_name (key_part,...)
    [index_option]
    [algorithm_option | lock_option] ...

key_part: {col_name [(length)] | (expr)} [ASC | DESC]

index_option: {
    KEY_BLOCK_SIZE [=] value
  | index_type
  | WITH PARSER parser_name
  | COMMENT 'string'
  | {VISIBLE | INVISIBLE}
  | ENGINE_ATTRIBUTE [=] 'string'
  | SECONDARY_ENGINE_ATTRIBUTE [=] 'string'
}

index_type:
    USING {BTREE | HASH}

algorithm_option:
    ALGORITHM [=] {DEFAULT | INPLACE | COPY}

lock_option:
    LOCK [=] {DEFAULT | NONE | SHARED | EXCLUSIVE}
```



## 3. 使用规则和模式实现数据库完整性控制

### 【任务目的】

能够根据数据库完成需要，创建相关属性的默认和约束规则，并能够将创建的规则绑定到指定的字段，在表约束和列约束基础上进一步强化数据库完整性控制。

### 【任务环境】

* 硬件环境：
* 软件环境：

### 【任务步骤完成情况】

1. 创建规则和默认

* 创建学时数必须大于等于8的规则。

语句：



* 创建出生日期默认为2000-1-1的默认。

语句：



1.  绑定规则和默认

* 将学时约束绑定到课程的学时字段上。

语句：



* 将出生日期默认约束绑定到学生表出生日期字段上。

语句：



1.  验证规则和默认

* 验证插入一条学时数量小于等于8的课程，查看规则是否生效。

语句：



* 验证插入一条没有出生日期的学生信息，查看出生日期是否生效。

语句：



1.  解绑规则和默认

* 解除学时的规则。

语句：



*  解除出生日期的默认

语句：



1. 删除规则和默认

* 删除学时的规则。

语句：




* 删除出生日期的规则。

语句：



###  【任务总结】

分析规则和默认使用和删除的步骤。

## 4. 备份和恢复

### 【任务目的】

能够根据数据库运维需要，开展数据库整体备份、脚本导出备份等工作，并可利用备份后的数据库实现数据库的迁移和恢复操作。

### 【任务环境】

* 硬件环境：
* 软件环境：

### 【任务步骤完成情况】

1. 备份数据库

* 使用SQL脚本导出方式导出数据库的架构和数据。

步骤说明：

2. 数据库恢复

* 将现有数据库删除，并使用SQL导出脚本恢复整个数据库。

步骤说明：

### 【任务总结】

1. 对比分析使用文件备份和SQL脚本备份的使用范围。

2. 自学差异备份数据库操作，分析差异备份和完整备份的区别。

3. 对比分析异地备份的优势。

